<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="io.bms.bmswk.mapper.PermissionMapper">

    <select id="getPermissionsByRoleName" resultType="io.bms.bmswk.model.dto.PermissionDTO">
        select p.id as permission_id, p.name as permission_name
        from (select rp.permission_id
              from t_role as r inner join t_role_permission as rp
                  on r.id = rp.role_id
              where r.name = #{roleName})
            as rrp inner join t_permission as p
                on rrp.permission_id = p.id;
    </select>
</mapper>
